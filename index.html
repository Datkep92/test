
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quản lý nhân viên</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    .hidden { display: none; }
    .report-row { margin-bottom: 1rem; padding: 0.5rem; border: 1px solid #e5e7eb; border-radius: 0.375rem; }
    .action-btn { margin-left: 0.5rem; }
  </style>
</head>
<body class="bg-gray-100">
  <div id="login-page">
    <h1 class="text-2xl font-bold text-center mt-8">Đăng nhập</h1>
    <div class="max-w-md mx-auto mt-4 p-4 bg-white shadow rounded">
      <input id="email" type="email" class="w-full p-2 mb-2 border rounded" placeholder="Email">
      <input id="password" type="password" class="w-full p-2 mb-2 border rounded" placeholder="Mật khẩu">
      <label class="inline-flex items-center mb-2">
        <input id="remember-me" type="checkbox" class="form-checkbox">
        <span class="ml-2">Ghi nhớ đăng nhập</span>
      </label>
      <button onclick="login()" class="w-full p-2 bg-blue-500 text-white rounded">Đăng nhập</button>
    </div>
  </div>
  <div id="manager-page" class="hidden">
    <h1 class="text-2xl font-bold text-center mt-8">Giao diện Quản lý</h1>
    <div class="max-w-4xl mx-auto mt-4 p-4 bg-white shadow rounded">
      <h2 class="text-xl font-semibold mb-2">Thêm sản phẩm</h2>
      <div class="flex space-x-2 mb-4">
        <input id="product-name" type="text" class="p-2 border rounded w-1/3" placeholder="Tên sản phẩm">
        <input id="product-quantity" type="number" class="p-2 border rounded w-1/3" placeholder="Số lượng">
        <input id="product-price" type="number" class="p-2 border rounded w-1/3" placeholder="Đơn giá">
        <button onclick="addInventory()" class="p-2 bg-blue-500 text-white rounded">Thêm</button>
      </div>
      <h2 class="text-xl font-semibold mb-2">Danh sách hàng trong kho</h2>
      <div id="manager-inventory-list" class="mb-4"></div>
      <h2 class="text-xl font-semibold mb-2">Báo cáo tổng</h2>
      <select id="manager-report-filter" class="p-2 border rounded mb-2">
        <option value="day">Theo ngày</option>
        <option value="month">Theo tháng</option>
      </select>
      <div id="shared-report-table" class="mb-4"></div>
    </div>
  </div>
  <div id="employee-page" class="hidden">
    <h1 class="text-2xl font-bold text-center mt-8">Giao diện Nhân viên</h1>
    <div class="max-w-4xl mx-auto mt-4 p-4 bg-white shadow rounded">
      <h2 class="text-xl font-semibold mb-2">Danh sách hàng trong kho</h2>
      <div id="employee-inventory-list" class="mb-4"></div>
      <h2 class="text-xl font-semibold mb-2">Gửi báo cáo</h2>
      <div class="grid grid-cols-2 gap-4 mb-4">
        <input id="employee-initial-inventory" type="number" class="p-2 border rounded" placeholder="Tồn kho đầu kỳ">
        <input id="employee-final-inventory" type="number" class="p-2 border rounded" placeholder="Tồn kho cuối kỳ">
        <input id="employee-revenue" type="number" class="p-2 border rounded" placeholder="Doanh Thu">
        <input id="employee-expense-amount" type="number" class="p-2 border rounded" placeholder="Chi Phí">
        <input id="employee-expense-info" type="text" class="p-2 border rounded col-span-2" placeholder="Thông tin Chi Phí">
      </div>
      <button onclick="submitEmployeeReport()" class="p-2 bg-blue-500 text-white rounded mb-4">Gửi Báo Cáo</button>
      <h2 class="text-xl font-semibold mb-2">Báo cáo tổng</h2>
      <select id="employee-report-filter" class="p-2 border rounded mb-2">
        <option value="day">Theo ngày</option>
        <option value="month">Theo tháng</option>
      </select>
      <div id="shared-report-table" class="mb-4"></div>
    </div>
  </div>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <script src="firebase-config.js"></script>
  <script src="auth.js"></script>
  <script src="manager.js"></script>
  <script src="employee.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (auth.currentUser) {
        auth.onAuthStateChanged(user => {
          if (user) {
            db.ref('users/' + user.uid).once('value').then(snapshot => {
              const userData = snapshot.val();
              if (userData && userData.role === 'manager') {
                loadInventory('manager-inventory-list');
                loadSharedReports('shared-report-table');
              } else {
                loadInventory('employee-inventory-list');
                loadSharedReports('shared-report-table');
              }
            });
          }
        });
      }
    });
  </script>
</body>
</html>
