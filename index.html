```html
<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quáº£n lÃ½ Kinh doanh</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    .hidden { display: none; }
    table { border-collapse: collapse; width: 100%; margin-top: 10px; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background-color: #f2f2f2; }
    button { padding: 8px 12px; margin: 5px; cursor: pointer; }
    input, select, textarea { padding: 8px; margin: 5px; width: 200px; }
    h3 { margin-top: 20px; }
    #errorContainer, #registerErrorContainer, #editErrorContainer { color: red; }
    .section { margin-bottom: 20px; }
    .tab { cursor: pointer; padding: 10px; background-color: #e0e0e0; display: inline-block; margin-right: 5px; }
    .tab.active { background-color: #007bff; color: white; }
  </style>
</head>
<body>
  <h1>ğŸ“Š Quáº£n lÃ½ Kinh doanh</h1>
  <div>
    <span id="currentUser"></span>
    <button id="logoutBtn" class="hidden">ÄÄƒng xuáº¥t</button>
  </div>

  <!-- ÄÄƒng nháº­p -->
  <div id="loginSection" class="section">
    <h3>ğŸ” ÄÄƒng nháº­p</h3>
    <input type="text" id="username" placeholder="Nháº­p tÃªn Ä‘Äƒng nháº­p (vÃ­ dá»¥: test)">
    <input type="password" id="password" placeholder="Nháº­p máº­t kháº©u">
    <input type="checkbox" id="rememberMe"> <label for="rememberMe">Ghi nhá»› Ä‘Äƒng nháº­p</label>
    <br>
    <button id="loginButton">ÄÄƒng nháº­p</button>
    <button id="registerButton">ÄÄƒng kÃ½</button>
    <div id="errorContainer"></div>
  </div>

  <!-- ÄÄƒng kÃ½ -->
  <div id="registerSection" class="hidden section">
    <h3>ğŸ“ ÄÄƒng kÃ½</h3>
    <input type="text" id="regUsername" placeholder="Nháº­p tÃªn Ä‘Äƒng nháº­p (vÃ­ dá»¥: test)">
    <input type="password" id="regPassword" placeholder="Nháº­p máº­t kháº©u">
    <select id="regRole">
      <option value="admin">Quáº£n lÃ½</option>
      <option value="employee">NhÃ¢n viÃªn</option>
    </select>
    <br>
    <button id="submitRegisterButton">ÄÄƒng kÃ½</button>
    <button id="backToLoginButton">Quay láº¡i Ä‘Äƒng nháº­p</button>
    <div id="registerErrorContainer"></div>
  </div>

  <!-- Chá»‰nh sá»­a ngÆ°á»i dÃ¹ng -->
  <div id="editUserSection" class="hidden section">
    <h3>âœï¸ Chá»‰nh sá»­a NgÆ°á»i dÃ¹ng</h3>
    <input type="hidden" id="editUserId">
    <input type="text" id="editUsername" placeholder="TÃªn Ä‘Äƒng nháº­p">
    <select id="editRole">
      <option value="admin">Quáº£n lÃ½</option>
      <option value="employee">NhÃ¢n viÃªn</option>
    </select>
    <select id="editStatus">
      <option value="active">Hoáº¡t Ä‘á»™ng</option>
      <option value="inactive">KhÃ´ng hoáº¡t Ä‘á»™ng</option>
    </select>
    <br>
    <button id="saveUserButton">LÆ°u</button>
    <button id="cancelEditButton">Há»§y</button>
    <div id="editErrorContainer"></div>
  </div>

  <!-- Quáº£n lÃ½ NgÆ°á»i dÃ¹ng -->
  <div id="userManagementSection" class="hidden section">
    <h3>ğŸ‘¥ Quáº£n lÃ½ NgÆ°á»i dÃ¹ng</h3>
    <button id="addUserBtn">ThÃªm ngÆ°á»i dÃ¹ng</button>
    <table id="userTable">
      <thead>
        <tr>
          <th>TÃªn Ä‘Äƒng nháº­p</th>
          <th>Vai trÃ²</th>
          <th>Tráº¡ng thÃ¡i</th>
          <th>HÃ nh Ä‘á»™ng</th>
        </tr>
      </thead>
      <tbody id="userTableBody"></tbody>
    </table>
  </div>

  <!-- Chi phÃ­ -->
  <div id="expenseSection" class="hidden section">
    <h3>ğŸ’¸ Chi phÃ­</h3>
    <input type="text" id="expenseInput" placeholder="MÃ´ táº£ chi phÃ­">
    <input type="number" id="expenseAmount" placeholder="Sá»‘ tiá»n">
    <button id="addExpenseBtn">ThÃªm</button>
    <table>
      <thead>
        <tr>
          <th>MÃ´ táº£</th>
          <th>Sá»‘ tiá»n</th>
          <th>HÃ nh Ä‘á»™ng</th>
        </tr>
      </thead>
      <tbody id="expenseTableBody"></tbody>
    </table>
  </div>

  <!-- Xuáº¥t hÃ ng -->
  <div id="exportSection" class="hidden section">
    <h3>ğŸ“¦ Xuáº¥t hÃ ng</h3>
    <button id="addExportBtn">ThÃªm xuáº¥t hÃ ng</button>
    <table>
      <thead>
        <tr>
          <th>Sáº£n pháº©m</th>
          <th>Sá»‘ lÆ°á»£ng</th>
          <th>ÄVT</th>
          <th>HÃ nh Ä‘á»™ng</th>
        </tr>
      </thead>
      <tbody id="exportTableBody"></tbody>
    </table>
  </div>

  <!-- Doanh thu -->
  <div id="revenueSection" class="hidden section">
    <h3>ğŸ’° Doanh thu</h3>
    <input type="number" id="revenueAmount" placeholder="Sá»‘ tiá»n">
    <button id="addRevenueBtn">ThÃªm</button>
    <table id="revenueTableBody"></table>
  </div>

  <!-- Tá»•ng káº¿t ngÃ y -->
  <div id="dailySummarySection" class="hidden section">
    <h3>ğŸ“ Tá»•ng káº¿t ngÃ y</h3>
    <p>Doanh thu: <span id="dailyRevenue">0â‚«</span></p>
    <p>Tá»•ng chi phÃ­: <span id="dailyExpense">0â‚«</span></p>
    <p>Sá»‘ dÆ°: <span id="dailyBalance">0â‚«</span></p>
    <label>Ghi chÃº cÃ¡ nhÃ¢n:</label>
    <textarea id="dailyNote"></textarea>
    <br>
    <button id="saveDailyDataBtn">LÆ°u dá»¯ liá»‡u</button>
  </div>

  <!-- Quáº£n lÃ½ Kho hÃ ng -->
  <div id="inventorySection" class="hidden section">
    <h3>ğŸ“¦ Quáº£n lÃ½ Kho hÃ ng</h3>
    <button id="addProductBtn">ThÃªm sáº£n pháº©m</button>
    <table>
      <thead>
        <tr>
          <th>TÃªn sáº£n pháº©m</th>
          <th>Sá»‘ lÆ°á»£ng</th>
          <th>ÄVT</th>
          <th>GiÃ¡ Ä‘Æ¡n vá»‹</th>
          <th>HÃ nh Ä‘á»™ng</th>
        </tr>
      </thead>
      <tbody id="productTableBody"></tbody>
    </table>
  </div>

  <!-- BÃ¡o cÃ¡o -->
  <div id="reportSection" class="hidden section">
    <h3>ğŸ“Š BÃ¡o cÃ¡o</h3>
    <input type="date" id="reportDate">
    <button id="generateDailyReportBtn">BÃ¡o cÃ¡o ngÃ y</button>
    <button id="generateMonthlyReportBtn">BÃ¡o cÃ¡o thÃ¡ng</button>
    <button id="printReportBtn">In bÃ¡o cÃ¡o</button>
    <select id="reportUserFilter">
      <option value="">Táº¥t cáº£ ngÆ°á»i dÃ¹ng</option>
    </select>
    <select id="reportCategoryFilter">
      <option value="">Táº¥t cáº£ danh má»¥c</option>
    </select>
    <button id="applyReportFiltersBtn">Ãp dá»¥ng</button>
    <div id="reportTable"></div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
    import { getDatabase, ref, set, get, update } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

    // Cáº¥u hÃ¬nh Firebase
    const firebaseConfig = {
      // Thay báº±ng cáº¥u hÃ¬nh Firebase cá»§a báº¡n
      apiKey: "YOUR_API_KEY",
      authDomain: "YOUR_AUTH_DOMAIN",
      databaseURL: "YOUR_DATABASE_URL",
      projectId: "YOUR_PROJECT_ID",
      storageBucket: "YOUR_STORAGE_BUCKET",
      messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
      appId: "YOUR_APP_ID"
    };
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    let currentUser = null;

    // HÃ m hiá»ƒn thá»‹ thÃ´ng bÃ¡o lá»—i
    function showError(message, containerId = "errorContainer") {
      const container = document.getElementById(containerId);
      if (container) container.innerHTML = message;
      else console.error(`KhÃ´ng tÃ¬m tháº¥y container: ${containerId}`);
    }

    // HÃ m hiá»ƒn thá»‹/áº©n biá»ƒu máº«u
    function showRegisterForm() {
      const loginSection = document.getElementById("loginSection");
      const registerSection = document.getElementById("registerSection");
      const editUserSection = document.getElementById("editUserSection");
      if (loginSection && registerSection && editUserSection) {
        loginSection.style.display = "none";
        registerSection.style.display = "block";
        editUserSection.style.display = "none";
      }
    }

    function showLoginForm() {
      const loginSection = document.getElementById("loginSection");
      const registerSection = document.getElementById("registerSection");
      const editUserSection = document.getElementById("editUserSection");
      if (loginSection && registerSection && editUserSection) {
        registerSection.style.display = "none";
        editUserSection.style.display = "none";
        loginSection.style.display = "block";
      }
    }

    function showEditUserForm(userId, username, role, status) {
      const loginSection = document.getElementById("loginSection");
      const registerSection = document.getElementById("registerSection");
      const editUserSection = document.getElementById("editUserSection");
      if (loginSection && registerSection && editUserSection) {
        loginSection.style.display = "none";
        registerSection.style.display = "none";
        editUserSection.style.display = "block";
        document.getElementById("editUserId").value = userId;
        document.getElementById("editUsername").value = username;
        document.getElementById("editRole").value = role;
        document.getElementById("editStatus").value = status;
      }
    }

    // HÃ m Ä‘Äƒng kÃ½
    async function handleRegister() {
      const username = document.getElementById("regUsername").value.trim();
      const password = document.getElementById("regPassword").value.trim();
      const role = document.getElementById("regRole").value;

      document.getElementById("registerErrorContainer").innerHTML = "";

      if (!username || !password) {
        showError("Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin Ä‘Äƒng kÃ½", "registerErrorContainer");
        return;
      }

      if (password.length < 6) {
        showError("Máº­t kháº©u pháº£i cÃ³ Ã­t nháº¥t 6 kÃ½ tá»±", "registerErrorContainer");
        return;
      }

      const email = `${username}@quanly-hkd.com`;

      try {
        const userCredential = await createUserWithEmailAndPassword(auth, email, password);
        const userId = userCredential.user.uid;

        const db = getDatabase();
        await set(ref(db, `users/${userId}`), {
          username: username,
          email: email,
          role: role,
          status: "active"
        });

        alert("ÄÄƒng kÃ½ thÃ nh cÃ´ng! Vui lÃ²ng Ä‘Äƒng nháº­p.");
        showLoginForm();
      } catch (error) {
        console.error("Register error:", error.code, error.message);
        let errorMessage = "ÄÄƒng kÃ½ tháº¥t báº¡i";
        switch (error.code) {
          case "auth/email-already-in-use":
            errorMessage = "Email Ä‘Ã£ Ä‘Æ°á»£c sá»­ dá»¥ng";
            break;
          case "auth/invalid-email":
            errorMessage = "Email khÃ´ng há»£p lá»‡";
            break;
          default:
            errorMessage = `Lá»—i: ${error.message}`;
        }
        showError(errorMessage, "registerErrorContainer");
      }
    }

    // HÃ m Ä‘Äƒng nháº­p
    async function handleLogin() {
      const username = document.getElementById("username").value.trim();
      const password = document.getElementById("password").value.trim();
      const rememberMe = document.getElementById("rememberMe").checked;

      document.getElementById("errorContainer").innerHTML = "";

      if (!username || !password) {
        showError("Vui lÃ²ng nháº­p Ä‘áº§y Ä‘á»§ thÃ´ng tin Ä‘Äƒng nháº­p");
        return;
      }

      const email = `${username}@quanly-hkd.com`;

      try {
        console.log("Äang Ä‘Äƒng nháº­p vá»›i email:", email);
        const userCredential = await signInWithEmailAndPassword(auth, email, password);

        if (rememberMe) {
          localStorage.setItem("rememberedUser", username);
        } else {
          localStorage.removeItem("rememberedUser");
        }

        currentUser = userCredential.user.uid;
        loadUserData();
      } catch (error) {
        console.error("Login error:", error.code, error.message);
        let errorMessage = "ÄÄƒng nháº­p tháº¥t báº¡i";
        switch (error.code) {
          case "auth/invalid-credential":
            errorMessage = "Sai tÃªn Ä‘Äƒng nháº­p hoáº·c máº­t kháº©u";
            break;
          case "auth/invalid-email":
            errorMessage = "Email khÃ´ng há»£p lá»‡";
            break;
          case "auth/user-not-found":
            errorMessage = "Email chÆ°a Ä‘Æ°á»£c Ä‘Äƒng kÃ½";
            break;
          case "auth/too-many-requests":
            errorMessage = "QuÃ¡ nhiá»u láº§n thá»­, vui lÃ²ng thá»­ láº¡i sau";
            break;
          default:
            errorMessage = `Lá»—i: ${error.message}`;
        }
        showError(errorMessage);
      }
    }

    // HÃ m táº£i dá»¯ liá»‡u ngÆ°á»i dÃ¹ng
    async function loadUserData() {
      const db = getDatabase();
      const userRef = ref(db, `users/${currentUser}`);
      try {
        const snapshot = await get(userRef);
        if (snapshot.exists()) {
          const userData = snapshot.val();
          const currentUserElement = document.getElementById("currentUser");
          if (currentUserElement) {
            currentUserElement.textContent = userData.username;
          }
          handleSuccessfulLogin(userData.role);
          if (userData.role === "admin") {
            loadUsers();
          }
        } else {
          showError("KhÃ´ng tÃ¬m tháº¥y thÃ´ng tin ngÆ°á»i dÃ¹ng");
          handleLogout();
        }
      } catch (error) {
        console.error("Error loading user data:", error);
        showError("Lá»—i khi táº£i dá»¯ liá»‡u ngÆ°á»i dÃ¹ng");
        handleLogout();
      }
    }

    // HÃ m xá»­ lÃ½ Ä‘Äƒng nháº­p thÃ nh cÃ´ng (phÃ¢n quyá»n)
    function handleSuccessfulLogin(role) {
      const userManagementSection = document.getElementById("userManagementSection");
      const reportSection = document.getElementById("reportSection");
      const inventorySection = document.getElementById("inventorySection");
      const expenseSection = document.getElementById("expenseSection");
      const exportSection = document.getElementById("exportSection");
      const revenueSection = document.getElementById("revenueSection");
      const dailySummarySection = document.getElementById("dailySummarySection");
      const loginSection = document.getElementById("loginSection");
      const logoutBtn = document.getElementById("logoutBtn");

      if (loginSection) loginSection.style.display = "none";
      if (logoutBtn) logoutBtn.style.display = "block";

      if (userManagementSection && reportSection && inventorySection && expenseSection && exportSection && revenueSection && dailySummarySection) {
        if (role === "admin") {
          userManagementSection.style.display = "block";
          reportSection.style.display = "block";
          inventorySection.style.display = "block";
          expenseSection.style.display = "block";
          exportSection.style.display = "block";
          revenueSection.style.display = "block";
          dailySummarySection.style.display = "block";
        } else if (role === "employee") {
          userManagementSection.style.display = "none";
          reportSection.style.display = "block";
          inventorySection.style.display = "block";
          expenseSection.style.display = "block";
          exportSection.style.display = "block";
          revenueSection.style.display = "block";
          dailySummarySection.style.display = "block";
        } else {
          showError("Vai trÃ² khÃ´ng há»£p lá»‡");
          handleLogout();
        }
      }
    }

    // HÃ m Ä‘Äƒng xuáº¥t
    function handleLogout() {
      auth.signOut().then(() => {
        currentUser = null;
        const currentUserElement = document.getElementById("currentUser");
        if (currentUserElement) currentUserElement.textContent = "";
        showLoginForm();
        document.getElementById("userManagementSection").style.display = "none";
        document.getElementById("reportSection").style.display = "none";
        document.getElementById("inventorySection").style.display = "none";
        document.getElementById("expenseSection").style.display = "none";
        document.getElementById("exportSection").style.display = "none";
        document.getElementById("revenueSection").style.display = "none";
        document.getElementById("dailySummarySection").style.display = "none";
        document.getElementById("logoutBtn").style.display = "none";
      });
    }

    // HÃ m táº£i danh sÃ¡ch ngÆ°á»i dÃ¹ng
    async function loadUsers() {
      const db = getDatabase();
      const usersRef = ref(db, "users");
      try {
        const snapshot = await get(usersRef);
        const userTableBody = document.getElementById("userTableBody");
        if (userTableBody) {
          userTableBody.innerHTML = "";
          if (snapshot.exists()) {
            snapshot.forEach((childSnapshot) => {
              const user = childSnapshot.val();
              const userId = childSnapshot.key;
              const row = document.createElement("tr");
              row.innerHTML = `
                <td>${user.username}</td>
                <td>${user.role === "admin" ? "Quáº£n lÃ½" : "NhÃ¢n viÃªn"}</td>
                <td>${user.status === "active" ? "Hoáº¡t Ä‘á»™ng" : "KhÃ´ng hoáº¡t Ä‘á»™ng"}</td>
                <td>
                  <button onclick="showEditUserForm('${userId}', '${user.username}', '${user.role}', '${user.status}')">Chá»‰nh sá»­a</button>
                </td>
              `;
              userTableBody.appendChild(row);
            });
          }
        }
      } catch (error) {
        console.error("Error loading users:", error);
        showError("Lá»—i khi táº£i danh sÃ¡ch ngÆ°á»i dÃ¹ng");
      }
    }

    // HÃ m chá»‰nh sá»­a ngÆ°á»i dÃ¹ng
    async function handleEditUser() {
      const userId = document.getElementById("editUserId").value;
      const username = document.getElementById("editUsername").value.trim();
      const role = document.getElementById("editRole").value;
      const status = document.getElementById("editStatus").value;

      document.getElementById("editErrorContainer").innerHTML = "";

      if (!username) {
        showError("Vui lÃ²ng nháº­p tÃªn Ä‘Äƒng nháº­p", "editErrorContainer");
        return;
      }

      const db = getDatabase();
      try {
        await update(ref(db, `users/${userId}`), {
          username: username,
          role: role,
          status: status
        });
        alert("Cáº­p nháº­t ngÆ°á»i dÃ¹ng thÃ nh cÃ´ng!");
        showLoginForm();
        loadUsers();
      } catch (error) {
        console.error("Edit user error:", error);
        showError("Lá»—i khi cáº­p nháº­t ngÆ°á»i dÃ¹ng", "editErrorContainer");
      }
    }

    // HÃ m giáº£ Ä‘á»‹nh cho cÃ¡c chá»©c nÄƒng khÃ¡c
    function addExpense() { console.log("ThÃªm chi phÃ­"); }
    function addExport() { console.log("ThÃªm xuáº¥t hÃ ng"); }
    function addRevenue() { console.log("ThÃªm doanh thu"); }
    function saveDailyData() { console.log("LÆ°u dá»¯ liá»‡u ngÃ y"); }
    function addProduct() { console.log("ThÃªm sáº£n pháº©m"); }
    function addUser() { showRegisterForm(); }
    function generateDailyReport() { console.log("Táº¡o bÃ¡o cÃ¡o ngÃ y"); }
    function generateMonthlyReport() { console.log("Táº¡o bÃ¡o cÃ¡o thÃ¡ng"); }
    function printReport() { console.log("In bÃ¡o cÃ¡o"); }
    function applyReportFilters() { console.log("Ãp dá»¥ng bá»™ lá»c bÃ¡o cÃ¡o"); }
    function switchTab(tab) { console.log("Chuyá»ƒn tab:", tab); }

    // HÃ m khá»Ÿi táº¡o
    function initApp() {
      document.addEventListener("DOMContentLoaded", () => {
        const today = new Date().toISOString().split("T")[0];
        const reportDate = document.getElementById("reportDate");
        if (reportDate) reportDate.value = today;

        const rememberedUser = localStorage.getItem("rememberedUser");
        if (rememberedUser) {
          const usernameInput = document.getElementById("username");
          if (usernameInput) {
            usernameInput.value = rememberedUser;
            const passwordInput = document.getElementById("password");
            if (passwordInput) passwordInput.focus();
          }
        }

        const loginBtn = document.getElementById("loginButton");
        const logoutBtn = document.getElementById("logoutBtn");
        const registerBtn = document.getElementById("registerButton");
        const submitRegisterBtn = document.getElementById("submitRegisterButton");
        const backToLoginBtn = document.getElementById("backToLoginButton");
        const addExpenseBtn = document.getElementById("addExpenseBtn");
        const addExportBtn = document.getElementById("addExportBtn");
        const addRevenueBtn = document.getElementById("addRevenueBtn");
        const saveDailyDataBtn = document.getElementById("saveDailyDataBtn");
        const addProductBtn = document.getElementById("addProductBtn");
        const addUserBtn = document.getElementById("addUserBtn");
        const generateDailyReportBtn = document.getElementById("generateDailyReportBtn");
        const generateMonthlyReportBtn = document.getElementById("generateMonthlyReportBtn");
        const printReportBtn = document.getElementById("printReportBtn");
        const applyReportFiltersBtn = document.getElementById("applyReportFiltersBtn");
        const saveUserBtn = document.getElementById("saveUserButton");
        const cancelEditBtn = document.getElementById("cancelEditButton");
        const tabs = document.querySelectorAll(".tab");

        if (loginBtn) loginBtn.addEventListener("click", handleLogin);
        if (logoutBtn) logoutBtn.addEventListener("click", handleLogout);
        if (registerBtn) registerBtn.addEventListener("click", showRegisterForm);
        if (submitRegisterBtn) submitRegisterBtn.addEventListener("click", handleRegister);
        if (backToLoginBtn) backToLoginBtn.addEventListener("click", showLoginForm);
        if (addExpenseBtn) addExpenseBtn.addEventListener("click", addExpense);
        if (addExportBtn) addExportBtn.addEventListener("click", addExport);
        if (addRevenueBtn) addRevenueBtn.addEventListener("click", addRevenue);
        if (saveDailyDataBtn) saveDailyDataBtn.addEventListener("click", saveDailyData);
        if (addProductBtn) addProductBtn.addEventListener("click", addProduct);
        if (addUserBtn) addUserBtn.addEventListener("click", addUser);
        if (generateDailyReportBtn) generateDailyReportBtn.addEventListener("click", generateDailyReport);
        if (generateMonthlyReportBtn) generateMonthlyReportBtn.addEventListener("click", generateMonthlyReport);
        if (printReportBtn) printReportBtn.addEventListener("click", printReport);
        if (applyReportFiltersBtn) applyReportFiltersBtn.addEventListener("click", applyReportFilters);
        if (saveUserBtn) saveUserBtn.addEventListener("click", handleEditUser);
        if (cancelEditBtn) cancelEditBtn.addEventListener("click", showLoginForm);
        if (tabs) tabs.forEach(tab => tab.addEventListener("click", () => switchTab(tab.dataset.tab)));

        const passwordInput = document.getElementById("password");
        if (passwordInput) {
          passwordInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") handleLogin();
          });
        }

        const expenseInput = document.getElementById("expenseInput");
        if (expenseInput) {
          expenseInput.addEventListener("keypress", (e) => {
            if (e.key === "Enter") addExpense();
          });
        }

        const revenueAmount = document.getElementById("revenueAmount");
        if (revenueAmount) {
          revenueAmount.addEventListener("keypress", (e) => {
            if (e.key === "Enter") addRevenue();
          });
        }

        onAuthStateChanged(auth, (user) => {
          if (user) {
            currentUser = user.uid;
            loadUserData();
          } else {
            showLoginForm();
          }
        });
      });
    }

    initApp();
  </script>
</body>
</html>
```
