<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quáº£n lÃ½ Kinh doanh</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f9f9f9; }
    .nav { display: flex; justify-content: space-between; align-items: center; background: #333; padding: 10px; color: white; }
    .nav a { color: white; text-decoration: none; }
    .section { margin: 20px 0; background: white; padding: 15px; border-radius: 5px; box-shadow: 0 0 5px rgba(0,0,0,0.1); }
    .section h2 { border-bottom: 1px solid #ccc; padding-bottom: 5px; color: #333; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    table, th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }
    th { background: #f4f4f4; }
    button { padding: 5px 10px; cursor: pointer; background: #4CAF50; color: white; border: none; border-radius: 3px; }
    button:hover { background: #45a049; }
    .summary p { margin: 5px 0; font-weight: bold; }
    .filter { margin: 10px 0; }
    .action-btn { background: #ff4444; }
    .action-btn:hover { background: #cc0000; }
    input[type="text"], input[type="password"] { padding: 5px; margin: 5px 0; }
  </style>
  <!-- ThÃªm SDK Firebase qua CDN -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js"></script>
  <script>
    // Cáº¥u hÃ¬nh Firebase tá»« dá»± Ã¡n quanly-d7e54
    const firebaseConfig = {
      apiKey: "AIzaSyDmFpKa8TpDjo3pQADaTubgVpDPOi-FPXk",
      authDomain: "quanly-d7e54.firebaseapp.com",
      databaseURL: "https://quanly-d7e54-default-rtdb.firebaseio.com",
      projectId: "quanly-d7e54",
      storageBucket: "quanly-d7e54.firebasestorage.app",
      messagingSenderId: "482686011267",
      appId: "1:482686011267:web:f2fe9d400fe618487a98b6"
    };

    // Khá»Ÿi táº¡o Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // HÃ m thÃªm chi phÃ­
    function addExpense() {
      const description = prompt("Nháº­p mÃ´ táº£ chi phÃ­:");
      const amount = prompt("Nháº­p sá»‘ tiá»n (â‚«):");
      if (description && amount) {
        database.ref('expenses').push({
          description: description,
          amount: parseInt(amount),
          timestamp: firebase.database.ServerValue.TIMESTAMP
        }).then(() => updateSummary()).catch((error) => alert("Lá»—i: " + error.message));
      }
    }

    // HÃ m thÃªm xuáº¥t hÃ ng
    function addShipment() {
      const product = prompt("Nháº­p sáº£n pháº©m:");
      const quantity = prompt("Nháº­p sá»‘ lÆ°á»£ng:");
      const unit = prompt("Nháº­p Ä‘Æ¡n vá»‹ tÃ­nh:");
      if (product && quantity && unit) {
        database.ref('shipments').push({
          product: product,
          quantity: parseInt(quantity),
          unit: unit,
          timestamp: firebase.database.ServerValue.TIMESTAMP
        }).then(() => loadData('shipments')).catch((error) => alert("Lá»—i: " + error.message));
      }
    }

    // HÃ m thÃªm doanh thu
    function addRevenue() {
      const description = prompt("Nháº­p mÃ´ táº£ doanh thu:");
      const amount = prompt("Nháº­p sá»‘ tiá»n (â‚«):");
      if (description && amount) {
        database.ref('revenues').push({
          description: description,
          amount: parseInt(amount),
          timestamp: firebase.database.ServerValue.TIMESTAMP
        }).then(() => updateSummary()).catch((error) => alert("Lá»—i: " + error.message));
      }
    }

    // HÃ m thÃªm sáº£n pháº©m vÃ o kho
    function addProduct() {
      const name = prompt("Nháº­p tÃªn sáº£n pháº©m:");
      const quantity = prompt("Nháº­p sá»‘ lÆ°á»£ng:");
      const unit = prompt("Nháº­p Ä‘Æ¡n vá»‹ tÃ­nh:");
      const price = prompt("Nháº­p giÃ¡ Ä‘Æ¡n vá»‹ (â‚«):");
      if (name && quantity && unit && price) {
        database.ref('inventory').push({
          name: name,
          quantity: parseInt(quantity),
          unit: unit,
          price: parseInt(price),
          timestamp: firebase.database.ServerValue.TIMESTAMP
        }).then(() => loadData('inventory')).catch((error) => alert("Lá»—i: " + error.message));
      }
    }

    // HÃ m thÃªm ngÆ°á»i dÃ¹ng
    function addUser() {
      const username = prompt("Nháº­p tÃªn Ä‘Äƒng nháº­p:");
      const role = prompt("Nháº­p vai trÃ² (NhÃ¢n viÃªn/Quáº£n lÃ½):");
      const status = prompt("Nháº­p tráº¡ng thÃ¡i (Hoáº¡t Ä‘á»™ng/KhÃ´ng hoáº¡t Ä‘á»™ng):");
      if (username && role && status) {
        database.ref('users').push({
          username: username,
          role: role,
          status: status,
          timestamp: firebase.database.ServerValue.TIMESTAMP
        }).then(() => loadData('users')).catch((error) => alert("Lá»—i: " + error.message));
      }
    }

    // HÃ m táº£i vÃ  hiá»ƒn thá»‹ dá»¯ liá»‡u
    function loadData(tableName) {
      const tables = {
        'shipments': '#shipmentsTable',
        'inventory': '#inventoryTable',
        'users': '#usersTable',
        'expenses': '#expensesTable',
        'revenues': '#revenuesTable'
      };
      if (tables[tableName]) {
        database.ref(tableName).on('value', (snapshot) => {
          const tbody = document.querySelector(tables[tableName] + ' tbody');
          tbody.innerHTML = '';
          snapshot.forEach((childSnapshot) => {
            const data = childSnapshot.val();
            const row = document.createElement('tr');
            let cols = '';
            if (tableName === 'shipments') cols = `<td>${data.product}</td><td>${data.quantity}</td><td>${data.unit}</td>`;
            else if (tableName === 'inventory') cols = `<td>${data.name}</td><td>${data.quantity}</td><td>${data.unit}</td><td>${data.price}â‚«</td>`;
            else if (tableName === 'users') cols = `<td>${data.username}</td><td>${data.role}</td><td>${data.status}</td>`;
            else if (tableName === 'expenses') cols = `<td>${data.description}</td><td>${data.amount}â‚«</td>`;
            else if (tableName === 'revenues') cols = `<td>${data.description}</td><td>${data.amount}â‚«</td>`;
            row.innerHTML = cols + `<td><button class="action-btn" onclick="deleteItem('${tableName}', '${childSnapshot.key}')">XÃ³a</button></td>`;
            tbody.appendChild(row);
          });
        });
      }
    }

    // HÃ m xÃ³a má»¥c
    function deleteItem(tableName, key) {
      if (confirm("Báº¡n cÃ³ cháº¯c muá»‘n xÃ³a?")) {
        database.ref(tableName).child(key).remove().then(() => {
          alert("XÃ³a thÃ nh cÃ´ng!");
          if (tableName === 'expenses' || tableName === 'revenues') updateSummary();
          else loadData(tableName);
        }).catch((error) => alert("Lá»—i: " + error.message));
      }
    }

    // HÃ m cáº­p nháº­t tá»•ng káº¿t
    function updateSummary() {
      let totalExpense = 0;
      let totalRevenue = 0;

      database.ref('expenses').once('value').then((snapshot) => {
        snapshot.forEach((childSnapshot) => totalExpense += childSnapshot.val().amount || 0);
        database.ref('revenues').once('value').then((snapshot) => {
          snapshot.forEach((childSnapshot) => totalRevenue += childSnapshot.val().amount || 0);
          document.querySelector('#revenue').textContent = `Doanh thu: ${totalRevenue}â‚«`;
          document.querySelector('#expense').textContent = `Tá»•ng chi phÃ­: ${totalExpense}â‚«`;
          document.querySelector('#balance').textContent = `Sá»‘ dÆ°: ${totalRevenue - totalExpense}â‚«`;
        });
      });
    }

    // HÃ m lÆ°u ghi chÃº
    function saveNote() {
      const note = prompt("Nháº­p ghi chÃº cÃ¡ nhÃ¢n:");
      if (note) {
        database.ref('notes').push({
          content: note,
          timestamp: firebase.database.ServerValue.TIMESTAMP
        }).then(() => alert("LÆ°u ghi chÃº thÃ nh cÃ´ng!")).catch((error) => alert("Lá»—i: " + error.message));
      }
    }

    // Gáº¯n sá»± kiá»‡n khi táº£i trang
    window.onload = () => {
      updateSummary();
      ['shipments', 'inventory', 'users', 'expenses', 'revenues'].forEach(loadData);
      document.querySelector('#addExpenseBtn').addEventListener('click', addExpense);
      document.querySelector('#addShipmentBtn').addEventListener('click', addShipment);
      document.querySelector('#addRevenueBtn').addEventListener('click', addRevenue);
      document.querySelector('#addProductBtn').addEventListener('click', addProduct);
      document.querySelector('#addUserBtn').addEventListener('click', addUser);
      document.querySelector('#saveNoteBtn').addEventListener('click', saveNote);
    };
  </script>
</head>
<body>
  <div class="nav">
    <h1>ğŸ“Š Quáº£n lÃ½ Kinh doanh</h1>
    <a href="#">ÄÄƒng xuáº¥t</a>
  </div>

  <div class="section">
    <h2>ğŸ” ÄÄƒng nháº­p</h2>
    <input type="text" placeholder="TÃªn Ä‘Äƒng nháº­p"><br>
    <input type="password" placeholder="Máº­t kháº©u"><br>
    <label><input type="checkbox"> Ghi nhá»› Ä‘Äƒng nháº­p</label><br>
    <button onclick="alert('Chá»©c nÄƒng Ä‘Äƒng nháº­p chÆ°a Ä‘Æ°á»£c triá»ƒn khai')">ÄÄƒng nháº­p</button>
    <p>Äang xÃ¡c thá»±c...</p>
  </div>

  <div class="section">
    <h2>ğŸ’¸ Chi phÃ­</h2>
    <button id="addExpenseBtn">ThÃªm chi phÃ­</button>
    <table>
      <thead><tr><th>MÃ´ táº£</th><th>Sá»‘ tiá»n</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody id="expensesTable"></tbody>
    </table>
  </div>

  <div class="section">
    <h2>ğŸ“¦ Xuáº¥t hÃ ng</h2>
    <button id="addShipmentBtn">ThÃªm xuáº¥t hÃ ng</button>
    <table>
      <thead><tr><th>Sáº£n pháº©m</th><th>Sá»‘ lÆ°á»£ng</th><th>ÄVT</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody id="shipmentsTable"></tbody>
    </table>
  </div>

  <div class="section">
    <h2>ğŸ’° Doanh thu</h2>
    <button id="addRevenueBtn">ThÃªm doanh thu</button>
    <table>
      <thead><tr><th>MÃ´ táº£</th><th>Sá»‘ tiá»n</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody id="revenuesTable"></tbody>
    </table>
  </div>

  <div class="section">
    <h2>ğŸ“ Tá»•ng káº¿t ngÃ y</h2>
    <p id="revenue">Doanh thu: 0â‚«</p>
    <p id="expense">Tá»•ng chi phÃ­: 0â‚«</p>
    <p id="balance">Sá»‘ dÆ°: 0â‚«</p>
    <p>ğŸ“Œ Ghi chÃº cÃ¡ nhÃ¢n:</p>
    <button id="saveNoteBtn">ğŸ’¾ LÆ°u dá»¯ liá»‡u</button>
  </div>

  <div class="section">
    <h2>ğŸ“¦ Quáº£n lÃ½ Kho hÃ ng</h2>
    <button id="addProductBtn">â• ThÃªm sáº£n pháº©m</button>
    <table>
      <thead><tr><th>TÃªn sáº£n pháº©m</th><th>Sá»‘ lÆ°á»£ng</th><th>ÄVT</th><th>GiÃ¡ Ä‘Æ¡n vá»‹</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody id="inventoryTable"></tbody>
    </table>
  </div>

  <div class="section">
    <h2>ğŸ“Š BÃ¡o cÃ¡o</h2>
    <button onclick="alert('Chá»©c nÄƒng bÃ¡o cÃ¡o ngÃ y chÆ°a Ä‘Æ°á»£c triá»ƒn khai')">ğŸ“… BÃ¡o cÃ¡o ngÃ y</button>
    <button onclick="alert('Chá»©c nÄƒng bÃ¡o cÃ¡o thÃ¡ng chÆ°a Ä‘Æ°á»£c triá»ƒn khai')">ğŸ“† BÃ¡o cÃ¡o thÃ¡ng</button>
    <button onclick="alert('Chá»©c nÄƒng in bÃ¡o cÃ¡o chÆ°a Ä‘Æ°á»£c triá»ƒn khai')">ğŸ–¨ï¸ In bÃ¡o cÃ¡o</button>
    <div class="filter">
      <select><option>Táº¥t cáº£ ngÆ°á»i dÃ¹ng</option></select>
      <select><option>Táº¥t cáº£ danh má»¥c</option></select>
      <button onclick="alert('Chá»©c nÄƒng Ã¡p dá»¥ng chÆ°a Ä‘Æ°á»£c triá»ƒn khai')">ğŸ” Ãp dá»¥ng</button>
    </div>
  </div>

  <div class="section">
    <h2>ğŸ‘¥ Quáº£n lÃ½ NgÆ°á»i dÃ¹ng</h2>
    <select>
      <option>NhÃ¢n viÃªn</option>
      <option>Quáº£n lÃ½</option>
    </select>
    <button id="addUserBtn">â• ThÃªm ngÆ°á»i dÃ¹ng</button>
    <table>
      <thead><tr><th>TÃªn Ä‘Äƒng nháº­p</th><th>Vai trÃ²</th><th>Tráº¡ng thÃ¡i</th><th>HÃ nh Ä‘á»™ng</th></tr></thead>
      <tbody id="usersTable"></tbody>
    </table>
  </div>
</body>
</html>
